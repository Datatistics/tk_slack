---
output-file: interection_builder.html
title: interaction_builder

---



<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

# SnowflakeConnector

Connector class for Snowflake operations related to Slack interactions. Handles connecting to Snowflake and provides methods for data operations.

---

### SnowflakeConnector

>      SnowflakeConnector (connection_params:Optional[Dict[str,Any]]=None)

*Connector class for Snowflake operations related to Slack interactions.
Handles connecting to Snowflake and provides methods for data operations.*


# ActionHandler

---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L17){target="_blank" style="float:right; font-size:smaller"}

### ActionHandler

>      ActionHandler (snowflake_connector)

*Handles Slack interactive actions, including acknowledgment, response, 
and storing results in Snowflake.

Implements a singleton pattern to ensure only one handler exists.*


### Responding to Actions:

### Storing Action in Snowflake

When the user interacts with the bot, the action is stored in Snowflake. The action is stored in a table called `user_interaction`. The table has the following columns:

We also need a way to get information about a view in Snowflake:

# ActionIdManager

---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/core.py#L401){target="_blank" style="float:right; font-size:smaller"}

### ActionIdManager

>      ActionIdManager ()

*Manages action IDs for Slack interactive elements to ensure uniqueness
and provide routing capabilities for action handlers.*


Let's now update the [`ActionHandler`](https://Datatistics.github.io/tk_slack/API/interection_builder.html#actionhandler) class to use the new `ActionIDManager` class.

Let's create a method to allow the user to setup the action handler in their slackbot app, and this handler will need to use an instance of the `ActionIDManager` class to generate a unique action ID for each action. The action ID will be used to identify the action in the Snowflake table

---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L402){target="_blank" style="float:right; font-size:smaller"}

### ActionHandler.setup_slack_action_handler

>      ActionHandler.setup_slack_action_handler (app, snowflake_connector)

*Set up a single Slack action handler with the Bolt app.

Args:
    app: Slack Bolt app
    snowflake_connector: Connector for Snowflake operations*


We also need to update the [`ActionHandler`](https://Datatistics.github.io/tk_slack/API/interection_builder.html#actionhandler) class to use the new `ActionIDManager` class. When processing actions from the app, it will need to call `parse_action_id` to get the information from the id

---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L419){target="_blank" style="float:right; font-size:smaller"}

### ActionHandler.process_action

>      ActionHandler.process_action (body:Dict[str,Any], respond:Callable,
>                                    components:Optional[Dict[str,Any]]=None)

*Process a Slack action event.

Args:
    body: Slack event body
    respond: Slack respond function
    components: Optional pre-parsed action ID components

Returns:
    Processed action data*


# InteractionBuilder

---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L461){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder

>      InteractionBuilder ()

*Utility class for creating interactive Slack Block Kit elements.*


First, let's start at the top of the message, which would be the message's header:

---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L469){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder.create_button

>      InteractionBuilder.create_button (text:str, action_id:str,
>                                        url:Optional[str]=None,
>                                        value:Optional[str]=None,
>                                        style:Optional[str]=None)

*Create a button element for Slack messages.

Args:
    text: Button text
    action_id: Identifier for the button
    url: Optional URL for link buttons
    value: Optional value for the button
    style: Optional style - "primary" or "danger"

Returns:
    Slack block kit button object*


::: {#2eac1b34 .cell}
``` {.python .cell-code}
test_eq(InteractionBuilder.create_button('My Button','button_clicked'),
        {'type': 'button',
        'text': {'type': 'plain_text', 'text': 'My Button', 'emoji': True},
        'action_id': 'button_clicked'})

InteractionBuilder.create_button('My Button','button_clicked')
```

::: {.cell-output .cell-output-display}
```
{'type': 'button',
 'text': {'type': 'plain_text', 'text': 'My Button', 'emoji': True},
 'action_id': 'button_clicked'}
```
:::
:::


We also need a way to turn the action elements into the full action section/block:

---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L506){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder.create_actions_block

>      InteractionBuilder.create_actions_block (elements:List[Dict[str,Any]])

*Create an actions block for Slack messages.

Args:
    elements: List of interactive elements

Returns:
    Slack block kit actions object*


::: {#22112ef9 .cell}
``` {.python .cell-code}
test_eq(
    InteractionBuilder.create_actions_block(
        InteractionBuilder.create_button('Another Button','button_2_clicked')),
    {'type': 'actions',
    'elements': {'type': 'button',
    'text': {'type': 'plain_text', 'text': 'Another Button', 'emoji': True},
    'action_id': 'button_2_clicked'}}
)


InteractionBuilder.create_actions_block(
    InteractionBuilder.create_button('Another Button','button_2_clicked')
)
```

::: {.cell-output .cell-output-display}
```
{'type': 'actions',
 'elements': {'type': 'button',
  'text': {'type': 'plain_text', 'text': 'Another Button', 'emoji': True},
  'action_id': 'button_2_clicked'}}
```
:::
:::


---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L519){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder.create_datepicker

>      InteractionBuilder.create_datepicker (action_id:str, placeholder:str,
>                                            initial_date:Optional[str]=None)

*Create a date picker element.

Args:
    action_id: Identifier for the date picker
    placeholder: Placeholder text
    initial_date: Optional initial date (YYYY-MM-DD format)

Returns:
    Slack block kit datepicker object*


::: {#be5f02dd .cell}
``` {.python .cell-code}
test_eq(InteractionBuilder.create_datepicker('start_date','Pick a Start Date'),
        {'type': 'datepicker',
            'action_id': 'start_date',
            'placeholder': {'type': 'plain_text',
            'text': 'Pick a Start Date',
            'emoji': True}})

InteractionBuilder.create_datepicker('start_date','Pick a Start Date')
```

::: {.cell-output .cell-output-display}
```
{'type': 'datepicker',
 'action_id': 'start_date',
 'placeholder': {'type': 'plain_text',
  'text': 'Pick a Start Date',
  'emoji': True}}
```
:::
:::


---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L548){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder.create_static_select

>      InteractionBuilder.create_static_select (action_id:str, placeholder:str,
>                                               options:List[Tuple[str,str]])

*Create a dropdown select element.

Args:
    action_id: Identifier for the select
    placeholder: Placeholder text
    options: List of (text, value) tuples for options

Returns:
    Slack block kit static_select object*


::: {#ef75cdf0 .cell}
``` {.python .cell-code}
test_eq(InteractionBuilder.create_static_select('credit_action','Choose and Action',[('Issue Creidt','issue_credit'),('Ignore','ignore')]),
        {'type': 'static_select',
            'action_id': 'credit_action',
            'placeholder': {'type': 'plain_text',
            'text': 'Choose and Action',
            'emoji': True},
            'options': [{'text': {'type': 'plain_text',
                'text': 'Issue Creidt',
                'emoji': True},
            'value': 'issue_credit'},
            {'text': {'type': 'plain_text', 'text': 'Ignore', 'emoji': True},
            'value': 'ignore'}]})

InteractionBuilder.create_static_select('credit_action','Choose and Action',[('Issue Creidt','issue_credit'),('Ignore','ignore')])
```

::: {.cell-output .cell-output-display}
```
{'type': 'static_select',
 'action_id': 'credit_action',
 'placeholder': {'type': 'plain_text',
  'text': 'Choose and Action',
  'emoji': True},
 'options': [{'text': {'type': 'plain_text',
    'text': 'Issue Creidt',
    'emoji': True},
   'value': 'issue_credit'},
  {'text': {'type': 'plain_text', 'text': 'Ignore', 'emoji': True},
   'value': 'ignore'}]}
```
:::
:::


---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L585){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder.create_multi_select

>      InteractionBuilder.create_multi_select (action_id:str, placeholder:str,
>                                              options:List[Tuple[str,str]])

*Create a multi-select dropdown element.

Args:
    action_id: Identifier for the multi-select
    placeholder: Placeholder text
    options: List of (text, value) tuples for options

Returns:
    Slack block kit multi_static_select object*


::: {#6385a15e .cell}
``` {.python .cell-code}
test_eq(InteractionBuilder.create_multi_select('select_multiple','Select Option(s)',[('One','one'),('Two','two')]),
        {'type': 'multi_static_select',
            'action_id': 'select_multiple',
            'placeholder': {'type': 'plain_text',
            'text': 'Select Option(s)',
            'emoji': True},
            'options': [{'text': {'type': 'plain_text', 'text': 'One', 'emoji': True},
            'value': 'one'},
            {'text': {'type': 'plain_text', 'text': 'Two', 'emoji': True},
            'value': 'two'}]})

InteractionBuilder.create_multi_select('select_multiple','Select Option(s)',[('One','one'),('Two','two')])
```

::: {.cell-output .cell-output-display}
```
{'type': 'multi_static_select',
 'action_id': 'select_multiple',
 'placeholder': {'type': 'plain_text',
  'text': 'Select Option(s)',
  'emoji': True},
 'options': [{'text': {'type': 'plain_text', 'text': 'One', 'emoji': True},
   'value': 'one'},
  {'text': {'type': 'plain_text', 'text': 'Two', 'emoji': True},
   'value': 'two'}]}
```
:::
:::


---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L622){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder.create_users_select

>      InteractionBuilder.create_users_select (action_id:str, placeholder:str)

*Create a user select element.

Args:
    action_id: Identifier for the users select
    placeholder: Placeholder text

Returns:
    Slack block kit users_select object*


::: {#f8f17a21 .cell}
``` {.python .cell-code}
test_eq(InteractionBuilder.create_users_select('selected_user','Select a User'),
        {'type': 'users_select',
        'action_id': 'selected_user',
        'placeholder': {'type': 'plain_text', 'text': 'Select a User', 'emoji': True}})

InteractionBuilder.create_users_select('selected_user','Select a User')
```

::: {.cell-output .cell-output-display}
```
{'type': 'users_select',
 'action_id': 'selected_user',
 'placeholder': {'type': 'plain_text', 'text': 'Select a User', 'emoji': True}}
```
:::
:::


---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L644){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder.create_channels_select

>      InteractionBuilder.create_channels_select (action_id:str,
>                                                 placeholder:str)

*Create a channel select element.

Args:
    action_id: Identifier for the channels select
    placeholder: Placeholder text

Returns:
    Slack block kit channels_select object*


::: {#5021c23d .cell}
``` {.python .cell-code}
test_eq(InteractionBuilder.create_channels_select('selected_channel','Select a Channel'),
        {'type': 'channels_select',
        'action_id': 'selected_channel',
        'placeholder': {'type': 'plain_text',
        'text': 'Select a Channel',
        'emoji': True}})

InteractionBuilder.create_channels_select('selected_channel','Select a Channel')
```

::: {.cell-output .cell-output-display}
```
{'type': 'channels_select',
 'action_id': 'selected_channel',
 'placeholder': {'type': 'plain_text',
  'text': 'Select a Channel',
  'emoji': True}}
```
:::
:::


---

[source](https://github.com/Datatistics/tk_slack/blob/main/tk_slack/interaction_builder.py#L666){target="_blank" style="float:right; font-size:smaller"}

### InteractionBuilder.detect_and_create_interactive_elements

>      InteractionBuilder.detect_and_create_interactive_elements
>                                                                 (option_names:
>                                                                 List[str], opt
>                                                                 ion_values:Lis
>                                                                 t[str], action
>                                                                 _type:Optional
>                                                                 [str]=None, me
>                                                                 tadata:Optiona
>                                                                 l[str]=None, v
>                                                                 iew_info:Optio
>                                                                 nal[Dict[str,A
>                                                                 ny]]=None)

*Smartly detect and create appropriate interactive elements.

Args:
    option_names: List of option names
    option_values: List of option values
    action_type: Optional explicit action type
    metadata: Optional metadata to include in action_id
    view_info: Optional view information for embedding in metadata

Returns:
    List of interactive elements*


::: {#685692b8 .cell}
``` {.python .cell-code}
test_eq(InteractionBuilder.detect_and_create_interactive_elements(['Start Date'],['start_date'],'selected_start_date'),
        [{'type': 'button',
            'text': {'type': 'plain_text', 'text': 'Start Date', 'emoji': True},
            'action_id': 'selected_start_date_0',
            'value': 'start_date',
            'style': 'primary'}])

InteractionBuilder.detect_and_create_interactive_elements(['Start Date'],['start_date'],'selected_start_date')
```

::: {.cell-output .cell-output-display}
```
[{'type': 'button',
  'text': {'type': 'plain_text', 'text': 'Start Date', 'emoji': True},
  'action_id': 'selected_start_date_0',
  'value': 'start_date',
  'style': 'primary'}]
```
:::
:::


